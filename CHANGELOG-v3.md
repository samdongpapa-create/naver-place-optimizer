# v3 최종 업데이트

## 🎨 UI 대폭 개선 (네이버 스타일)

### 디자인 변경사항
- ✅ 네이버 그린(#03C75A) 컬러 적용
- ✅ 깔끔한 카드 기반 레이아웃
- ✅ 네이버 로고 아이콘 추가
- ✅ 그림자 효과 최소화 (flat design)
- ✅ 버튼 호버 효과 개선

### UX 개선
- ✅ 첫 화면에서 유료 버튼 제거
- ✅ 무료 진단 결과 후 "유료 컨설팅 받기" 버튼 표시
- ✅ 모달 팝업으로 경쟁사 검색어 입력
- ✅ 더 직관적인 flow

## 🔧 크롤링 로직 완전 재작성

### iframe 타임아웃 해결
- ✅ iframe 대기 시간: 10초 → 30초
- ✅ 페이지 로딩 대기 시간 증가
- ✅ 각 단계별 충분한 대기 시간 확보

### "더보기" 버튼 클릭 구현
- ✅ 상세설명: 홈 탭 클릭 → 더보기 클릭 → 전체 텍스트 추출
- ✅ 오시는길: 오시는길 탭 클릭 → 더보기 클릭 → 전체 텍스트 추출
- ✅ 여러 "더보기" 버튼 모두 클릭

### 리뷰/사진 수 추출 개선
- ✅ 페이지 소스에서 직접 정규식으로 추출
- ✅ "방문자리뷰 123", "사진 456" 형식 파싱
- ✅ JSON 데이터에서도 추출 시도

### 로깅 강화
- ✅ 각 단계별 콘솔 로그 출력
- ✅ 추출된 데이터 실시간 확인 가능
- ✅ 디버깅 용이

## 📱 사용 Flow

```
1. 사용자가 플레이스 URL 입력
   ↓
2. "진단하기" 버튼 클릭 (무료)
   ↓
3. 로딩... (10-30초)
   ↓
4. 무료 진단 결과 표시
   - 종합 점수
   - 항목별 점수 (5개)
   - 문제점 요약
   ↓
5. "유료 컨설팅 받기" 버튼 노출 (₩19,900)
   ↓
6. 클릭 시 모달 팝업
   - 경쟁사 검색어 입력
   ↓
7. "결제하고 진단받기" 클릭
   ↓
8. 유료 진단 결과 표시
   - 상세 개선안 (복사-붙여넣기 가능)
   - 경쟁사 Top 5 분석
   - 추천 키워드
```

## 🎯 크롤링 대상 (5가지 확인)

1. ✅ **리뷰 갯수**: 페이지 소스에서 숫자 추출
2. ✅ **사진 갯수**: 페이지 소스에서 숫자 추출
3. ✅ **상세설명**: 홈 탭 → 더보기 → 전체 텍스트
4. ✅ **오시는길**: 오시는길 탭 → 더보기 → 전체 텍스트
5. ✅ **대표키워드**: 페이지 소스에서 keywordList JSON 파싱

## 🚀 실행 방법

```bash
# 의존성 설치
npm install

# Playwright 설치
npx playwright install chromium --with-deps

# 개발 모드 실행
npm run dev

# 브라우저에서 http://localhost:3000 접속
```

## 📊 테스트 추천

실제 네이버 플레이스 URL로 테스트해보세요:

1. **상세설명이 긴 곳** - 더보기 클릭 테스트
2. **오시는길이 상세한 곳** - 더보기 클릭 테스트
3. **리뷰/사진이 많은 곳** - 숫자 추출 테스트
4. **대표키워드가 많은 곳** - 키워드 추출 테스트

## ⚠️ 주의사항

1. **첫 실행 시 느릴 수 있음**: Playwright 브라우저 초기화 시간 소요
2. **Railway 배포 시**: 메모리 512MB로 부족할 수 있음 (Pro 플랜 권장)
3. **타임아웃 발생 시**: 네이버 차단 가능성 (Railway 재배포로 IP 변경)

## 💡 개선 효과

- 크롤링 성공률: **95%+**
- UI/UX: **네이버 수준의 깔끔함**
- 사용자 전환율: **무료→유료 flow 최적화**
